{"ast":null,"code":"import _regeneratorRuntime from\"/home/andoni/Universidad/PSoft/extensions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/andoni/Universidad/PSoft/extensions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/andoni/Universidad/PSoft/extensions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import logo from'./llave.png';import'./App.css';import{Modal}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LogIn(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),_2faToken=_useState6[0],set_2faToken=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),_2faAuth=_useState8[0],set_2faAuth=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),err=_useState10[0],setErr=_useState10[1];var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;body={email:email,password:password};_context.next=4;return axios.post(\"https://keypax-api.sytes.net/public/login\",body);case 4:response=_context.sent;_context.t0=response.status;_context.next=_context.t0===200?8:11;break;case 8:setErr(false);set_2faToken(response.data._2faToken);return _context.abrupt(\"break\",13);case 11:setErr(true);return _context.abrupt(\"break\",13);case 13:_context.next=17;break;case 15:_context.prev=15;_context.t1=_context[\"catch\"](0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function submit(){return _ref.apply(this,arguments);};}();var access=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var body,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;body={_2faToken:_2faToken,code:_2faAuth};_context2.next=4;return axios.post(\"https://keypax-api.sytes.net/public/2fa\",body);case 4:response=_context2.sent;localStorage.setItem('token',response.data.accessToken);props.setToken(response.data.accessToken);_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function access(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Modal,{show:_2faToken!==null,backdrop:\"static\",keyboard:false,dialogClassName:\"full_modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(Modal.Title,{className:\"modal-title\",children:\"Introduce codigo 2fa\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-class\",type:\"text\",placeholder:\"C\\xF3digo\",value:_2faAuth,onChange:function onChange(e){return set_2faAuth(e.target.value);},required:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:access,children:\"ENTER\"})]})}),/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"App-name\",children:\"KeyPax\"}),/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"})]}),err===true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-error\",type:\"text\",placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-error\",type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-class\",type:\"text\",placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-class\",type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:submit,children:\"SUBMIT\"})})]});}export default LogIn;","map":null,"metadata":{},"sourceType":"module"}